"use strict";var PReports=PReports||{};angular.module("PReports.resources",[]),angular.module("PReports.directives",[]),angular.module("PReports.services",[]),Date.prototype.getWeek=function(a){a="int"==typeof a?a:1;var b=new Date(this.getFullYear(),0,1),c=b.getDay()-a;c=c>=0?c:c+7;var d,e=Math.floor((this.getTime()-b.getTime()-6e4*(this.getTimezoneOffset()-b.getTimezoneOffset()))/864e5)+1;return 4>c?(d=Math.floor((e+c-1)/7)+1,d>52&&(nYear=new Date(this.getFullYear()+1,0,1),nday=nYear.getDay()-a,nday=nday>=0?nday:nday+7,d=nday<4?1:53)):d=Math.floor((e+c-1)/7),d},PReports=angular.module("PReports",["ngCookies","ngResource","ngSanitize","ngRoute","PReports.resources","PReports.directives","PReports.services","PReports.translations","PReports.filters","angularFileUpload","ui.bootstrap","ui.sortable"]).config(["$routeProvider","$httpProvider",function(a,b){a.when("/reports",{templateUrl:"views/reports.html",controller:"PReports.ReportCtrl"}).when("/reports/:reportId",{templateUrl:"views/reports_detail.html",controller:"PReports.ReportCtrl"}).when("/about",{templateUrl:"views/about.html"}).otherwise({redirectTo:"/reports"}),b.defaults.headers.common.Accept="application/json, application/hal+json"}]).run(["$rootScope","config",function(a,b){a.version=b.version}]),PReports.ReportCtrl=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(){a.reportSortableOptions={disabled:a.isReportLocked(),axis:"y",update:function(b,c){var d={},e=angular.copy(a.currentReport.milestones);d.execute=function(){a.currentReport.$update()},d.undo=function(){a.currentReport.milestones=e,a.currentReport.$update()},v(d)}}}function q(){var b,c,d="";j.watchHandles||(j.watchHandles=[]),c=j.$watch("search.name",function(c,e){c!=e&&(b&&l.cancel(b),d=c,b=l(function(){a.filterText=d,j.search.page=0,a.loadReports()},250))}),j.watchHandles.push(c),c=j.$watch("search.year",function(b,c){b!=c&&(j.search.page=0,a.loadReports())}),j.watchHandles.push(c),c=j.$watch("search.week",function(b,c){b!=c&&(j.search.page=0,a.loadReports())}),j.watchHandles.push(c)}function r(){j.watchHandles&&j.watchHandles.length>0&&angular.forEach(j.watchHandles,function(a){a()}),j.watchHandles=[]}function s(c){var e;return c?(e=new d(c),void(c._id||e.$create(function(c){console.log("saved new report"),a.newReportName=null,b.path("reports/"+e._id)},function(a){alert("could not save report")}))):void console.log("saveReport: no report given")}function t(){var b=a.uploader=g.create({scope:a,url:h.getCombinedServiceUrl()+"/reports/"+a.currentReport._id+"/images",alias:"image",removeAfterUpload:!0,autoUpload:!1,filters:[function(a){var c=b.isHTML5?a.type:"/"+a.value.slice(a.value.lastIndexOf(".")+1);return c="|"+c.toLowerCase().slice(c.lastIndexOf("/")+1)+"|",-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(c)}]});b.bind("complete",function(b,c,d,f){e.log(f),a.currentReport.images||(a.currentReport.images=[]),a.currentReport.images.push(f)}),b.bind("completeall",function(b,c){y(a.currentReport,function(b){a.currentReport.version=b.version})}),b.bind("error",function(a,b,c,d){console.log("setupFileUpload: upload failed"),j.error=!0,j.errorMessage=k.translate("error.image.upload")||k.translate("error.general")||"Error during communication with service."})}function u(a,b){var c=a/b;return c=Math.round(100*c)}function v(b){var c=!0;if(!b)return void e.log("storeAndExecute: no command given");if("object"!=typeof b)return void e.log("storeAndExecute: command is not an object");if(!b.hasOwnProperty("execute")||"function"!=typeof b.execute)return void e.log("storeAndExecute: no execute method found or not a function");b.hasOwnProperty("undo")&&"function"==typeof b.undo||(e.log("storeAndExecute: no undo method found or not a function. Command not added to queue."),c=!1),c&&(a.commands.length==a.COMMAND_QUEUE_SIZE?(a.commands=a.commands.slice(1),a.commands.push(b)):a.commands.push(b));try{b.execute()}catch(d){e.log("storeAndExecute: failed to execute command. "+d),a.commands.pop(b),alert("commmand execution failed!")}}function w(){f.get(a.config.getCombinedServiceUrl()+"/reports",{headers:{Accept:"text/plain"}}).success(function(b,c,d,e){a.projectNames=b}).error(i)}function x(a){return a?(a.year=parseInt(a.year),void(a.week=parseInt(a.week))):void console.log("convertCalAndWeekToInt: no report given")}function y(a,b){return a?void f.get(h.getCombinedServiceUrl()+a._links.self.href+"/version").success(function(a){console.log("Retrieved version "+a.version+" for report id "+a._id),b(a)}).error(i):void console.log("loadReportVersion: no report given")}function z(b){b&&(428==b.status?(e.log("Failed to update report because it has been modified."),a.commands=[],$("#dialogModifiedReport").modal("toggle")):i(b))}var A=5e3,B=25;a.COMMAND_QUEUE_SIZE=20,a.reports=[],a.currentReport=null,a.currentCalWeek=(new Date).getWeek(),j.search=j.search||{},j.search.year=j.search.hasOwnProperty("year")?j.search.year:(new Date).getFullYear(),j.search.week=j.search.hasOwnProperty("week")?j.search.week:(new Date).getWeek(),j.search.name=j.search.hasOwnProperty("name")?j.search.name:"",j.search.limit=B,j.search.page=j.search.hasOwnProperty("page")?j.search.page:0,a.weeks=[],a.years=[2014,2015,2016,2017],a.config=h,a.projectNames=[],a.reportNotFound=!1,a.commands=[],jQuery('[data-toggle="tooltip"]').tooltip();for(var C=1;53>C;C++)a.weeks.push({week:C});a.loadReports=function(b){if(console.log("loadReports"),a.reportsWrapper&&a.reportsWrapper._links){if("next"==b&&a.reportsWrapper._links.next)return void f.get(h.getCombinedServiceUrl()+a.reportsWrapper._links.next.href).success(function(b){a.reportsWrapper=b,a.reports=b.reports,j.search.page=b.currentPage-1}).error(i);if("prev"==b&&a.reportsWrapper._links.prev)return void(a.reportsWrapper=f.get(h.getCombinedServiceUrl()+a.reportsWrapper._links.prev.href).success(function(b){a.reportsWrapper=b,a.reports=b.reports,j.search.page=b.currentPage-1}).error(i))}a.reportsWrapper=d.query({year:j.search.year,week:j.search.week,name:j.search.name,page:j.search.page,limit:B},function(b){a.reports=a.reportsWrapper.reports,j.search.page=a.reportsWrapper.currentPage-1},i)},a.loadReport=function(b){return b?(a.reportNotFound=!1,void(a.currentReport=d.get({id:b},function(){t(),p()},function(b){a.reportNotFound=!0,i(b)}))):void e.log("loadReport: No Id provided.")},a.reloadReport=function(b){return a.currentReport?(a.reportNotFound=!1,void(a.currentReport=d.get({id:a.currentReport._id},function(){a.commands&&a.commands.length>0},function(b){a.reportNotFound=!0,i(b)}))):void e.log("loadReport: No currentReport.")},a.setSearchAsQueryParams=function(){b.$$search={},j.search.week&&b.search("week",j.search.week),j.search.year&&b.search("year",j.search.year),j.search.name&&b.search("name",j.search.name)},a.showReport=function(a,c){a&&c&&"TD"==c.target.tagName&&b.path("reports/"+a)},a.createNewReport=function(){var b={},c=new Date;b.year=c.getFullYear(),b.week=c.getWeek(),b.name=a.newReportName,b.milestones=[],s(b)},a.updateReport=function(b,c,d,e,f){function g(a,b){var c,d;if(!b)return!1;if(c=b.split("."),c.length>0){d=a;for(var e=0;e<c.length;e++){if(!c[e]||!c[e].length)return!1;d=d[c[e]]}}return d}var h;if(!a.currentReport)return void console.log("updateReport: no current report");if(h={mP:b,pV:c,iA:d,i:e,aN:f},d&&"number"==typeof e&&f){var i=g(a.currentReport,f);h.nV=i[e][h.mP]}else h.nV=a.currentReport[h.mP];x(a.currentReport),h.execute=function(){if(d&&"number"==typeof e&&f){var b=g(a.currentReport,f);b[e][h.mP]=h.nV}else a.currentReport[h.mP]=h.nV;a.currentReport.$update(angular.noop,z)},h.mP&&(h.undo=function(){if(d&&"number"==typeof e&&f){var b=g(a.currentReport,f);b[e][h.mP]=h.pV}else a.currentReport[h.mP]=h.pV;a.currentReport.$update(angular.noop,z)}),v(h),p()},a.updateReportYear=function(b,c){e.log("Updating report year from "+c+" to "+b),a.updateReport("year",parseInt(c),!1)},a.updateReportWeek=function(b,c){e.log("Updating report week from "+c+" to "+b),a.updateReport("week",parseInt(c),!1)},a.incrementalUpdateReportWeek=function(b){var c=a.currentReport.week;"dec"==b?a.currentReport.week--:"inc"==b&&a.currentReport.week++,a.updateReportWeek(a.currentReport.week,c)},a.deleteReport=function(c){function d(){f["delete"](h.getCombinedServiceUrl()+a.reportToDelete._links.self.href).success(function(c,d,e,f){"/reports"==b.path()?angular.forEach(a.reports,function(b,c){return a.reportToDelete._id==b._id?(a.reports.splice(c,1),a.reportToDelete=null,!1):void 0}):b.path("/")}).error(i)}function e(){a.remainingSecondsBeforeDoomsday>0?a.remainingSecondsBeforeDoomsday=a.remainingSecondsBeforeDoomsday-1:(a.deleteTimer=!1,d())}return a.reportToDelete=c||a.currentReport,a.reportToDelete?(a.remainingSecondsBeforeDoomsday=Math.round(A/1e3),a.deleteTimer=!0,void(a.doomsdayInterval=m(e,1e3,a.remainingSecondsBeforeDoomsday+1))):void console.log("deleteReport: no report to delete")},a.delayDoomsday=function(){a.deleteTimer=!1,a.doomsdayInterval&&(m.cancel(a.doomsdayInterval),a.doomsdayInterval=null)},a.addMilestone=function(){var b={};return a.currentReport?(a.currentReport.milestones||(a.currentReport.milestones=[]),x(a.currentReport),b.execute=function(){a.currentReport.milestones.push({name:"New milestone"}),a.currentReport.$update(angular.noop,z)},b.undo=function(){a.currentReport.milestones.pop(),a.currentReport.$update(angular.noop,z)},void v(b)):void console.log("addMilestone: no current report")},a.removeMilestone=function(b){var c,d={};return a.currentReport?b||0===b?void(a.currentReport.milestones&&0!=a.currentReport.milestones.length&&a.currentReport.milestones[b]&&(x(a.currentReport),d.execute=function(){c=a.currentReport.milestones[b],a.currentReport.milestones.splice(b,1),a.currentReport.$update(angular.noop,z)},d.undo=function(){a.currentReport.milestones.splice(b,0,c),a.currentReport.$update(angular.noop,z)},v(d))):void console.log("addMilestone: no index given"):void console.log("addMilestone: no current report")},a.addCodeReview=function(){var b={};return a.currentReport?(a.currentReport.codeReviews||(a.currentReport.codeReviews=[]),x(a.currentReport),b.execute=function(){a.currentReport.codeReviews.push({authors:"Add authors"}),a.currentReport.$update()},b.undo=function(){a.currentReport.codeReviews.pop(),a.currentReport.$update()},void v(b)):void console.log("addCodeReview: no current report")},a.removeCodeReview=function(b){var c,d={};return a.currentReport?b||0===b?void(a.currentReport.codeReviews&&0!=a.currentReport.codeReviews.length&&a.currentReport.codeReviews[b]&&(x(a.currentReport),d.execute=function(){c=a.currentReport.codeReviews[b],a.currentReport.codeReviews.splice(b,1),a.currentReport.$update()},d.undo=function(){a.currentReport.codeReviews.splice(b,0,c),a.currentReport.$update()},v(d))):void console.log("removeCodeReview: no index given"):void console.log("removeCodeReview: no current report")},a.addSystem=function(){var b={};return a.currentReport?(a.currentReport.systems||(a.currentReport.systems=[]),x(a.currentReport),b.execute=function(){a.currentReport.systems.push({}),a.currentReport.$update()},b.undo=function(){a.currentReport.systems.pop(),a.currentReport.$update()},void v(b)):void console.log("addSystem: no current report")},a.removeSystem=function(b){var c,d={};return a.currentReport?b||0===b?void(a.currentReport.systems&&0!=a.currentReport.systems.length&&a.currentReport.systems[b]&&(x(a.currentReport),d.execute=function(){c=a.currentReport.systems[b],a.currentReport.systems.splice(b,1),a.currentReport.$update()},d.undo=function(){a.currentReport.systems.splice(b,0,c),a.currentReport.$update()},v(d))):void console.log("removeSystem: no index given"):void console.log("removeSystem: no current report")},a.addRecipient=function(){var b={};return a.currentReport?(a.currentReport.settings?a.currentReport.settings.notification?a.currentReport.settings.notification.recipients||(a.currentReport.settings.notification.recipients=[]):(a.currentReport.settings.notification={},a.currentReport.settings.settings.notification.recipients=[]):(a.currentReport.settings={},a.currentReport.settings.notification={},a.currentReport.settings.notification.recipients=[]),x(a.currentReport),b.execute=function(){a.currentReport.settings.notification.recipients.push({}),a.currentReport.$update()},b.undo=function(){a.currentReport.settings.notification.recipients.pop(),a.currentReport.$update()},void v(b)):void e.log("addSystem: no current report")},a.removeRecipient=function(b){var c,d={};return a.currentReport?b||0===b?a.currentReport.settings&&a.currentReport.settings.notification&&a.currentReport.settings.notification.recipients&&0!=a.currentReport.settings.notification.recipients.length&&a.currentReport.settings.notification.recipients[b]?(x(a.currentReport),d.execute=function(){c=a.currentReport.settings.notification.recipients[b],a.currentReport.settings.notification.recipients.splice(b,1),a.currentReport.$update()},d.undo=function(){a.currentReport.settings.notification.recipients.splice(b,0,c),a.currentReport.$update()},void v(d)):void e.log("removeRecipient: precondition checks on settings object failed"):void e.log("removeRecipient: no index given"):void e.log("removeRecipient: no current report")},a.sendNotifications=function(){return a.currentReport?void f.post(h.getCombinedServiceUrl()+"/reports/"+a.currentReport._id+"/notifications").success(angular.noop).error(function(a){e.error("Failed so send notifications "+a.message),i(a)}):void console.log("sendNotifications: no current report")},a.deleteReportImage=function(b){return b?a.currentReport?void f["delete"](h.getCombinedServiceUrl()+b._links.self.href).success(function(c,d,e,f){angular.forEach(a.currentReport.images,function(c,d){return c._id==b._id?(a.currentReport.images.splice(d,1),!1):void 0}),y(a.currentReport,function(b){a.currentReport.version=b.version})}).error(i):void console.log("deleteReportImage: no current report"):void console.log("deleteReportImage: no image given")},a.printReport=function(){return a.currentReport?void window.print():void console.log("printReport: no current report")},a.copyReport=function(a,b){var c=new Date;return a?(a.copyOf=a._id,delete a._id,a.name=a.name+"_copy",a.week=c.getWeek(),a.year=c.getFullYear(),a.locked=!1,void s(a)):void console.log("copyReport: no reportToCopy given")},a.toggleReportLock=function(){var b;return a.currentReport?("undefined"!=typeof a.currentReport.locked?(b=a.currentReport.locked,a.currentReport.locked=!b):(b=!1,a.currentReport.locked=!0),void a.updateReport()):void console.log("copyReport: no currentReport")},a.isReportLocked=function(){return a.currentReport?a.currentReport.locked:!1},a.isUrl=function(a){return o.isUrl(a)},a.calculateCosts=function(){if(!a.currentReport)return void console.log("copyReport: no currentReport");var b={prev:{hoursExternal:a.currentReport.hoursExternal,hoursInternalBI:a.currentReport.hoursInternalBI,hoursInternalIQuest:a.currentReport.hoursInternalIQuest,costsCurrent:a.currentReport.costsCurrent,costsRest:a.currentReport.costsRest,costsDelta:a.currentReport.costsDelta}};b.execute=function(){console.log("calculateCosts: execute");var b=0;a.temp.costs.hoursExternal&&(a.currentReport.hoursExternal=a.temp.costs.hoursExternal,b=a.config.COST_EXTERNAL*a.temp.costs.hoursExternal),a.temp.costs.hoursInternalBI&&(a.currentReport.hoursInternalBI=a.temp.costs.hoursInternalBI,b+=a.config.COST_INTERNAL_BI*a.temp.costs.hoursInternalBI),a.temp.costs.hoursInternalIQuest&&(a.currentReport.hoursInternalIQuest=a.temp.costs.hoursInternalIQuest,b+=a.config.COST_INTERNAL_IQUEST*a.temp.costs.hoursInternalIQuest),b/=1e3,a.currentReport.costsCurrent=Math.round(b),a.currentReport.costsCurrent&&a.currentReport.costsPlanned?(a.currentReport.costsRest=a.currentReport.costsPlanned-a.currentReport.costsCurrent,a.currentReport.costsDelta=u(a.currentReport.costsCurrent,a.currentReport.costsPlanned)):(a.currentReport.costsRest=null,a.currentReport.costsDelta=null),a.currentReport.$update(angular.noop,z),delete a.temp.costs},b.undo=function(){console.log("calculateCosts: undo"),a.currentReport.hoursExternal=b.prev.hoursExternal,a.currentReport.hoursInternalBI=b.prev.hoursInternalBI,a.currentReport.hoursInternalIQuest=b.prev.hoursInternalIQuest,a.currentReport.costsCurrent=b.prev.costsCurrent,a.currentReport.costsRest=b.prev.costsRest,a.currentReport.costsDelta=b.prev.costsDelta,a.currentReport.$update(angular.noop,z),delete a.temp.costs},v(b)},a.toggleCostDialog=function(){var b=angular.element("#costDialog .modal");b||console.log("No cost dialog found."),a.temp=a.temp?a.temp:{},a.temp.costs={hoursExternal:a.currentReport.hoursExternal,hoursInternalBI:a.currentReport.hoursInternalBI,hoursInternalIQuest:a.currentReport.hoursInternalIQuest},a.currentReport.locked||b.modal("toggle")},a.removeAndUndoLastCommand=function(){var b;a.commands.length>0?(b=a.commands.pop(),b.undo()):e.log("removeAndUndoLastCommand: no commands in queue")},a.isZero=function(a){return o.isZero(a)},a.getStateColor=function(a){var b="";if(!a)return"";switch(a){case 1:b="red";break;case 2:b="yellow";break;case 3:b="green"}return b},l(function(){c.reportId?(r(),a.loadReport(c.reportId)):(a.loadReports(),w(),q())},50)},PReports.ReportCtrl.$inject=["$scope","$location","$routeParams","Report","$log","$http","$fileUploader","config","errorHandler","$rootScope","language","$timeout","$interval","$interpolate","helper"],PReports.NavigationCtrl=function(a,b,c,d,e,f,g,h){function i(){var b;window.localStorage&&(b=window.localStorage.getItem(k),b||(b=c.get()),a.user.language=b)}function j(){f.get(d.getCombinedServiceUrl()+"/reports/count").success(function(a,b,c,d){h.reportsCount=a}).error(function(){g.log("getReportsCount: failed to get reports count")})}var k="com.bisnode.preports.user.language";a.user={},a.setUserLanguage=function(){a.user.language&&window.localStorage&&(window.localStorage.setItem(k,a.user.language),c.set(a.user.language),b.reload())},a.inIFrame=function(){var a=!0;try{a=window.self!==window.top}catch(b){return!0}return a},i(),"/about"==e.path()&&j()},PReports.NavigationCtrl.$inject=["$scope","$route","language","config","$location","$http","$log","$rootScope"],angular.module("PReports.resources").factory("genericResource",["$resource","config","errorHandler",function(a,b,c){function d(d,e,f){var g=a(b.getCombinedServiceUrl()+d,e,f);return g.prototype.saving=!1,g.prototype.isSaving=function(){return g.prototype.saving},g.prototype.setSaving=function(a){g.prototype.saving=a},g.prototype.$create=function(a,b,d){var e,f,g=this,h=angular.noop;switch(arguments.length){case 3:e=a,h=b,f=d;break;case 2:case 1:angular.isFunction(a)?(h=a,f=b||c):(e=a,h=b||angular.noop,f=c);case 0:break;default:throw"Expected between 1-3 arguments [params, success, error], got "+arguments.length+" arguments."}g.setSaving(!0),g.$save(e,function(a,b){g.setSaving(!1),h(a,b)},function(a,b,d,e){g.setSaving(!1),c(a,b,d,e)})},g}return d}]),angular.module("PReports.resources").factory("Report",["genericResource",function(a){var b=a("/reports/:id",{id:"@_id"},{update:{method:"PUT"},query:{method:"GET",isArray:!1}});return b}]),angular.module("PReports.translations",[],["$provide",function(a){var b={"error.image.upload":{DE:"Bild hochladen fehlgeschlagen.",EN:"Image upload failed."},"error.404":{DE:"404 Eine Ressource konnte nicht geladen werden.",EN:"404 Resource not available."},"error.403":{DE:"Ungültige Zugangsdaten oder keine Zugriffsrechte.",EN:"Invalid credentials or insufficient access rights."},"error.general":{DE:"Es gibt ein Problem mit der Verbindung zum Service.",EN:"There has been a connection problem."},"error.appengine":{DE:"Es liegt eine Serverstörung vor. Wir arbeiten an einer Lösung.",EN:"The service has been temporarily interrupted. We are working on a solution."},"common.error.footer":{DE:"Falls dieser Fehler weiterhin besteht, konktaktieren sie <a href='mailto:support@cloobster.com'>support@cloobster.com</a>.",EN:"If this error persists, contact <a href='mailto:support@cloobster.com'>support@cloobster.com</a>."},"common.sending":{DE:"Sende...",EN:"Sending..."},"common.send":{DE:"Sende",EN:"Send"},"common.password.invalid":{DE:"Passwort inkorrekt!",EN:"Password invalid!"},"common.more":{DE:"Mehr",EN:"More"},reports:{DE:"Reports",EN:"Reports"},"reports.back":{DE:"Reportliste",EN:"Reports list"},"reports.new":{DE:"Projektname eingeben und Neuer Report anklicken",EN:"Enter project name and click New report"},"reports.new.button":{DE:"Neuer Report",EN:"New report"},"reports.table.name":{DE:"Projektname",EN:"Project name"},"reports.table.year":{DE:"Jahr",EN:"Year"},"reports.table.week":{DE:"KW",EN:"Week"},"reports.table.images":{DE:"Bilder",EN:"Images"},"reports.table.actions":{DE:"Aktion",EN:"Action"},"report.name":{DE:"Projektname",EN:"Project name"},"report.start.title":{DE:"Start",EN:"Start"},"report.start.ph":{DE:"Startdatum eingeben",EN:"Enter start date"},"report.golive.title":{DE:"Go live",EN:"Go live"},"report.golive.ph":{DE:"Go live eingeben",EN:"Enter go live"},"report.year":{DE:"Jahr",EN:"Year"},"report.week":{DE:"Report Kalenderwoche",EN:"Report calendar week"},"report.leaddevelopers.title":{DE:"Lead developers",EN:"Lead developers"},"report.leaddevelopers.ph":{DE:"Entwickler eingeben",EN:"Enter developers"},"report.executivesponsor.title":{DE:"Executive Sponsor",EN:"Executive Sponsor"},"report.executivesponsor.ph":{DE:"Executive Sponsor eingeben",EN:"Enter executive sponsor"},"report.partner.title":{DE:"Partner",EN:"Partner"},"report.partner.ph":{DE:"Partner eingeben",EN:"Enter partner"},"report.projectmanagers.title":{DE:"Projektmanager",EN:"Project manager"},"report.projectmanagers.ph":{DE:"Manager eingeben",EN:"Enter manager"},"report.milestones":{DE:"Meilensteine",EN:"Milestones"},"report.milestones.ph":{DE:"Meilenstein eintragen",EN:"Enter milestone"},"report.milestones.start":{DE:"Meilenstein Start",EN:"Milestone start"},"report.milestones.end":{DE:"Meilenstein Datum",EN:"Milestone date"},"report.milestones.name":{DE:"Name",EN:"Name"},"report.lastweektasks":{DE:"Ergebnisse",EN:"Achievements"},"report.nextweektasks":{DE:"Nächste Aufgaben",EN:"Next objectives"},"report.tasks.ph":{DE:"Aufgaben eingeben",EN:"Enter tasks"},"report.potentials":{DE:"Identifizierte Potentiale",EN:"Identified potentials"},"report.potentials.ph":{DE:"Potentiale eingeben",EN:"Enter potentials"},"report.risks":{DE:"Risiken & Behinderungen",EN:"Risks & Impediments"},"report.risks.ph":{DE:"Risiken/Behinderungen eingeben",EN:"Enter risks/impediments"},"report.codereviews":{DE:"Code Reviews",EN:"Code reviews"},"report.codereviews.reviewer":{DE:"Reviewer",EN:"Reviewer"},"report.codereviews.reviewer.ph":{DE:"Reviewer eintragen",EN:"Enter reviewer"},"report.codereviews.topic":{DE:"Thema",EN:"Topic"},"report.codereviews.topic.ph":{DE:"Thema eintragen",EN:"Enter topic"},"report.codereviews.content":{DE:"Ergebnis",EN:"Result"},"report.codereviews.content.ph":{DE:"Ergenisse eintragen",EN:"Enter results"},"report.systems":{DE:"Systeme",EN:"Systems"},"report.systems.name":{DE:"Systemname",EN:"System name"},"report.systems.name.ph":{DE:"Systemname eintragen",EN:"Enter system name"},"report.systems.url":{DE:"Url",EN:"Url"},"report.systems.url.ph":{DE:"Url eintragen (http://)",EN:"Enter url (http://)"},"report.systems.remarks":{DE:"Bemerkungen",EN:"Remarks"},"report.systems.remarks.ph":{DE:"Bemerkungen eintragen (z. B. Zugangsdaten)",EN:"Enter remarks (e.g. credentials)"},"report.images":{DE:"Architektur-Diagramme",EN:"Architecture diagrams"},"report.delete.title":{DE:"Report löschen",EN:"Delete report"},"report.delete.text":{DE:"Report wird unwideruflich gelöscht!",EN:"Report will be deleted permanent!"},"report.copy.title":{DE:"Report kopieren",EN:"Copy report"},"report.copy.text":{DE:"Erzeugt eine Kopie des Reports, setzt aktuelle Kalenderwoche und Jahr.",EN:"Creates a copy of this report and uses current calendar week."},"report.copyof":{DE:"Dies ist eine Kopie",EN:"This is a copy"},"report.lastmodified":{DE:"Zuletzt geändert"},"report.createdon":{DE:"Erzeugt am"},"report.killing.msg":{DE:"Lösche Report {{reportToDelete.name}} in "},"report.428.title":{DE:"Report wure bearbeitet"},"report.428.msg":{DE:"Der Report wurde in der Zwischenzeit bearbeitet. Sie können Neuladen und die letzte Änderung verwerfen oder abbrechen, Ihre letzte Änderung sichern und manuell neuladen. Der Undo Stack wurde geleert, um Überschreiben zu verhindern."},"report.428.cancel":{DE:"Abbrechen"},"report.428.reload":{DE:"Neuladen und verwerfen"},"report.notification":{DE:"Empfänger für Report-Benachrichtigung",EN:"Recipients for report notification"},"report.notification.info":{DE:"E-Mails von Personen hinzufügen, um diesen Benachrichtigungen schicken zu können.",EN:"Add emails of people you want to notify."},"report.notification.title":{DE:"Benachrichtigung senden",EN:"Send notification"},"report.notification.text":{DE:"Benachrichtigung an eingetragene Empfänger mit Link zu diesem Report schicken?",EN:"Send a notification to recipients with a link to this report?"},"report.notification.recipient":{DE:"Empfänger",EN:"Recipient"},"report.notification.recipient.ph":{DE:"E-Mail oder Username eingeben",EN:"Enter email or username"},"report.signal.budget":{DE:"Budget",EN:"Budget"},"report.signal.time":{DE:"Time",EN:"Time"},"report.signal.quality":{DE:"Quality",EN:"Quality"},"report.costs.table.th.title":{DE:"K€",EN:"K€"},"report.costs.table.th.current":{DE:"Aktuell",EN:"Current"},"report.costs.table.th.rest":{DE:"Rest",EN:"Rest"},"report.costs.table.tr.title":{DE:"Kosten(total)",EN:"COST(total)"},"report.costs.plan":{DE:"Geplant",EN:"Plan"},"report.costs.plan.ph":{DE:"Eingabe in K€",EN:"Enter in K€"},"report.costs.current.ph":{DE:"Aktuelle Kosten",EN:"Current costs"},"report.costs.dialog.title":{DE:"Kostenberechnung in Projektstunden",EN:"Costs calculations in project hours"},"report.costs.dialog.msg":{DE:"Geben Sie die aufgewendeten Projektstunden ein.",EN:"Enter hours spend in project."},"report.dialog.costs.external":{DE:"Extern",EN:"External"},"report.dialog.costs.internal.bi":{DE:"Intern BI",EN:"Internal BI"},"report.dialog.costs.internal.iquest":{DE:"Intern iQuest",EN:"Internal iQuest"},"report.ordernumber.title":{DE:"#Projekt Nr.",EN:"#Project No."},"report.ordernumber.ph":{DE:"Projektnummer eingeben",EN:"Enter project number"},"report.time.plan.title":{DE:"Plan",EN:"Plan"},"report.time.current.title":{DE:"Aktuell",EN:"Current"},"report.time.plan":{DE:"Plan",EN:"Plan"},"report.time.plan.ph":{DE:"Geplanter GoLive",EN:"Planned GoLive"},"report.time.current":{DE:"Aktuell",EN:"Current"},"report.time.current.ph":{DE:"Aktueller GoLive",EN:"Current GoLive"},"report.time.time.title":{DE:"Zeit",EN:"Time"},back:{DE:"zurück",EN:"back"},start:{DE:"Start",EN:"Start"},end:{DE:"Ende",EN:"End"},save:{DE:"Speichern",EN:"Save"},cancel:{DE:"Abbrechen",EN:"Cancel"},enter:{DE:"Eingeben",EN:"Enter"},or:{DE:"oder",EN:"or"},all:{DE:"alle",EN:"all"},"file.dropzone":{DE:"Bilder hierher ziehen",EN:"Drop images"},search:{DE:"Suche",EN:"Search"},"delete":{DE:"Löschen",EN:"Delete"},copy:{DE:"Kopieren",EN:"Copy"},"error.title":{DE:"Ein Fehler ist aufgetreten",EN:"An error occured"},undo:{DE:"Rückgängig"},next:{DE:"Nächste"},prev:{DE:"Vorherige"},send:{DE:"Senden",EN:"Send"},name:{DE:"Name",EN:"Name"},date:{DE:"Datum",EN:"Date"},milestone:{DE:"Meilenstein",EN:"Milestone"},"propertyeditor.error.required":{DE:"Pflichtfeld",EN:"Required"},"propertyeditor.error.email":{DE:"Bitte gültige E-Mail eingeben.",EN:"Please enter a valid email."}};a.value("translation",b)}]),angular.module("PReports.services").factory("language",["$log","translation",function(a,b){function c(){var a,b=navigator.language?navigator.language:navigator.userLanguage,c="com.bisnode.preports.user.language";return window.localStorage&&(a=window.localStorage.getItem(c)),a?a:(("undefined"===b||0==b.length)&&(b="DE"),b.substring(0,2).toUpperCase())}var d=c(),e={get:function(){return c()},set:function(a){d=a},translate:function(a){return a&&b[a]?b[a][d]||"":""}};return e}]),angular.module("PReports.services").provider("config",function(){var a=this;a.config_={serviceUrl:"",servicePort:"",version:"1.4.0 Herculean Hedgehog",notificationProviders:["com-bisnode-notification","com-slack-notification"],notificationUrl:"http://ysr-dev-service-01:8181/rest/notification-service",priceRegExp:/([0123456789]+)\.([0123456789]*)/,currencyFormats:{EUR:"$1,$2 €",USD:"$ $1.$2"},COST_EXTERNAL:85,COST_INTERNAL_BI:68,COST_INTERNAL_IQUEST:45},a.setConfig=function(b){a.config_.serviceUrl=b.serviceUrl,a.config_.servicePort=b.servicePort,a.config_.priceRegExp=b.priceRegExp,a.config_.currencyFormats=b.currencyFormats},a.setServiceUrl=function(b){a.config_.serviceUrl=b},a.setservicePort=function(b){a.config_.servicePort=b},a.setPriceRegExp=function(b){a.config_.priceRegExp=b},a.config_.getCombinedServiceUrl=function(){return a.config_.serviceUrl?a.config_.servicePort?a.config_.serviceUrl+":"+a.config_.servicePort:a.config_.serviceUrl:location.protocol+"//"+location.host},a.setCurrencyFormats=function(b,c){1==arguments.length&&(a.config_.currencyFormats=b),2==arguments.length&&(a.config_.currencyFormats[b]=c)},a.$get=function(){return a.config_}}),angular.module("PReports.services").factory("errorHandler",["$rootScope","$location","$log","language","config",function(a,b,c,d,e){function f(b,e,f,g){var h;arguments.length>1?(h={},h.data=b,h.status=e,h.headers=f,h.config=g):h=b.hasOwnProperty("data")?b:{data:b};var i=h.data.errorKey,j=h.data.message;a.error=!0,a.errorMessage=d.translate(i)||d.translate("error."+h.status)||j||d.translate("error.general")||"Error during communication with service.",c.error("Error during http method, response object: "+angular.toJson(h))}return f.reset=function(){a.error=!1},f}]),angular.module("PReports.services").factory("notAuthenticatedInterceptor",["$log","$q","$location",function(a,b,c){return function(d){return d.then(function(b){return a.log("notAuthenticatedInterceptor intercepted successful request with status "+b.status),b},function(d){return 401===d.status&&(a.log("Request not authenticated status 401. Redirecting to login!"),window.location.href="//"+c.host()+":"+c.port()+"/login"),b.reject(d)})}}]),angular.module("PReports.services").config(["$httpProvider",function(a){a.responseInterceptors.push("notAuthenticatedInterceptor")}]),angular.module("PReports.services").factory("loadingService",function(){var a={requestCount:0,isLoading:function(){return a.requestCount>0}};return a}),angular.module("PReports.services").factory("onStartInterceptor",["loadingService","$rootScope",function(a,b){return function(c,d){return a.requestCount++,b.ajaxLoading=a.isLoading(),c}}]),angular.module("PReports.services").factory("onCompleteInterceptor",["loadingService","$rootScope","$q",function(a,b,c){return function(d){return d.then(function(c){return a.requestCount--,b.ajaxLoading=a.isLoading(),c},function(d){return a.requestCount--,b.ajaxLoading=a.isLoading(),c.reject(d)})}}]),angular.module("PReports.services").config(["$httpProvider",function(a){a.responseInterceptors.push("onCompleteInterceptor")}]),angular.module("PReports.services").run(["$http","onStartInterceptor",function(a,b){a.defaults.transformRequest.push(b)}]),angular.module("PReports.services").factory("helper",function(){var a={getFieldInputClass:function(a){return a.$dirty&&a.$invalid?"error":a.$dirty&&!a.$invalid?"success":""},isFunction:function(a){var b={};return a&&"[object Function]"===b.toString.call(a)},isUrl:function(a){var b=/(^http|^https):\/\//;return a?b.test(a):!1},isZero:function(a){return 0===a?!0:!1},isValidDate:function(a){return"[object Date]"!==Object.prototype.toString.call(a)?!1:!isNaN(a.getTime())}};return a}),angular.module("PReports.filters",[]).filter("breakFilter",function(){return function(a){return void 0!==a?a.replace(/\n/g,"<br />"):void 0}}),angular.module("PReports.directives").directive("l",["$locale","language","$interpolate",function(a,b,c){return function(a,d,e,f){function g(f){f&&(h=b.translate(f)||(l?e[l]:d.html()),
i=c(h),(j||angular.noop)(),j=a.$watch(i,function(a,b){l?d.attr(l,a):d.html(a)}))}var h,i,j,k=e.l,l=e.lAttribute;e.$observe("l",g),g(k)}}]),angular.module("PReports.directives").directive("logout",["$http","$location",function(a,b){return{templateUrl:"views/templates/logout.html",restrict:"EA",link:function(a){}}}]),angular.module("PReports.directives").directive("signal",["$locale","language","$interpolate",function(a,b,c){var d={restrict:"AE",replace:!1,transclude:!0,priority:100,scope:{signalTitle:"@",onSignalChange:"&",signalField:"@",signalEntity:"=",signalEnabled:"="},templateUrl:"views/templates/signal.html",compile:function(a,b,c){return{pre:function(a,b,c,d){},post:function(a,b,c,d){var e;b.find(".signal-body");a.switchSignal=function(b){if(1==a.signalEnabled||"undefined"==typeof a.signalEnabled){switch(e=a.signalEntity[a.signalField],b){case"red":a.signalEntity[a.signalField]=1;break;case"yellow":a.signalEntity[a.signalField]=2;break;case"green":a.signalEntity[a.signalField]=3}a.onSignalChange({modifiedProperty:a.signalField,prevValue:e}),console.log("Set state to "+a.signalField)}},a.isActive=function(b){return a.signalEntity&&a.signalEntity[a.signalField]==b?!0:!1},b.find(".toggler").bind("click",function(){var c;a.dialogDisabled||(c=b.find(".confirm-modal"),c.modal("toggle"))})}}}};return d}]),angular.module("PReports.directives").directive("simplePropertyEditor",["$timeout","$log","language","helper","$filter",function(a,b,c,d,e){function f(a){return c.translate(a)||a}function g(a){var b,c=(a.hasOwnProperty("editorRequired")?"required='required'":"",a.hasOwnProperty("editorRepeat")),d=(a.hasOwnProperty("editorPattern")?"ng-pattern='"+a.editorPattern+"'":"",a.hasOwnProperty("editorType")?a.editorType:"text");return c?("textarea"==d?b="":("email"!=d&&"password"!=d&&"number"!=d&&(d="text"),b='<div class="control-group" ng-class="getFieldInputClass(simplePropertyForm.repeatProperty.$invalid)"><div class="controls"><input type="'+d+'" name="repeatProperty" ng-model="editorRepeat" l-attribute="placeholder" l="propertyeditor.repeat.placeholder" required ng-change="matchInput()"></input><div class="help-inline" ng-show="simplePropertyForm.repeatProperty.$dirty && simplePropertyForm.repeatProperty.$invalid"><span ng-show="simplePropertyForm.repeatProperty.$error.required">'+f("propertyeditor.error.required")+'</span><span ng-show="simplePropertyForm.repeatProperty.$error.match">'+f("propertyeditor.error.match")+"</span></div></div></div>"),b):""}function h(a,b){var c,d=a.hasOwnProperty("editorRequired")&&!b?"required='required'":"",e=a.hasOwnProperty("editorPattern")?"ng-pattern='"+a.editorPattern+"'":"",g=a.hasOwnProperty("editorRepeat")?"ng-change='matchInput()'":"",h=a.hasOwnProperty("editorMaxLength")?"maxlength='"+a.editorMaxLength+"'":"",i=a.hasOwnProperty("editorPlaceholder")?"placeholder='"+f(a.editorPlaceholder)+"'":"",j=a.hasOwnProperty("editorType")?a.editorType:"text",k=b?"{{'simpleProperty'+"+b+"}}":"simpleProperty",l=b?"editorTranslations["+b+"]":"editorValue";return"textarea"==j?c='<p class="input-group"><textarea class="form-control" rows="8" cols="100" name="'+k+'" ng-model="'+l+'" '+h+" "+d+" "+e+" "+i+'></textarea><span type="button" class="btn btn-default input-group-addon" style="background-color: white;" ng-click="clearInput();"><i class="glyphicon glyphicon-remove"></i></span></p>':"datepicker"==j?c='<p class="input-group"><input class="form-control" type="'+j+'" '+i+' name="'+k+'" ng-model="'+l+'" '+h+" "+d+" "+e+" "+g+'></input><span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="clearInput()"><i class="glyphicon glyphicon-remove"></i></button></span></p><datepicker '+i+' name="'+k+'" ng-model="'+l+'" show-weeks="true"></datepicker>':("email"!=j&&"password"!=j&&"number"!=j&&"url"!=j&&(j="text"),c='<p class="input-group"><input class="form-control" type="'+j+'" '+i+' name="'+k+'" ng-model="'+l+'" '+h+" "+d+" "+e+" "+g+'></input><span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="clearInput()"><i class="glyphicon glyphicon-remove"></i></button></span></p>'),c}function i(a){return a?"error":a?"":"success"}var j={restrict:"A",replace:!1,transclude:!0,scope:{editorTitle:"@",editorPatternText:"@",editorOnSave:"&",editorEnabled:"=",editorValidate:"&",editorValidateText:"@",editorPlaceholder:"@",editorProperty:"=",editorField:"@",editorEntity:"="},template:function(a,b){var c,d=(b.hasOwnProperty("editorRequired")?"required='required'":"",b.hasOwnProperty("editorPattern")?"ng-pattern='"+b.editorPattern+"'":"",b.hasOwnProperty("editorField")?b.editorField:null),e=b.hasOwnProperty("editorEntity")?b.editorEntity:null;return c=d&&e?'<div class="toggler" ng-transclude></div><div class="simple-property-editor-mask"></div><div class="simple-property-editor" style="display:none; position:absolute; background-color:white;"><h5 class="editor-title" l="{{editorTitle}}">Edit property</h5><form name="simplePropertyForm" novalidate ng-submit="save()" class="edit-property-form"><div class="edit-property-form-inputs"><div class="control-group" ng-class="getFieldInputClass(simplePropertyForm.simpleProperty.$invalid)"><div class="controls">'+h(b)+'<div class="help-inline text-danger" ng-show="simplePropertyForm.simpleProperty.$dirty && simplePropertyForm.simpleProperty.$invalid"><span ng-show="simplePropertyForm.simpleProperty.$error.required">'+f("propertyeditor.error.required")+'</span><span ng-show="simplePropertyForm.simpleProperty.$error.number">'+f("propertyeditor.error.number")+'</span><span ng-show="simplePropertyForm.simpleProperty.$error.pattern">'+f("propertyeditor.error.pattern")+'</span><span ng-show="simplePropertyForm.simpleProperty.$error.custom">'+f("propertyeditor.error.custom")+'</span><span ng-show="simplePropertyForm.simpleProperty.$error.email" >'+f("propertyeditor.error.email")+'</span></div></div></div><div ng-repeat="t in editorEntity.translations"><div class="control-group" ng-class="getFieldInputClass(simplePropertyForm.simpleProperty{{t.lang}}.$invalid)"><div class="controls"><label>{{getLanguageTitle(t.lang)}}</label>'+h(b,"t.lang")+'<i class="icon-remove icon-black" ng-click="clearInput(t.lang)"></i></div></div></div></div><div class="row-fluid" style="margin-top: 5px"><button type="button" ng-click="closeDialog()" class="btn" data-dismiss="modal" style="margin-right: 5px;">'+f("cancel")+'</button><button type="submit" class="btn btn-primary" ng-disabled="!isValid()">'+f("save")+"</button></div></form></div>":'<div class="toggler" ng-transclude></div><div class="simple-property-editor-mask"></div><div class="simple-property-editor" style="display:none; position:absolute; background-color:white;"><h5 class="editor-title" l="{{editorTitle}}">Edit property</h5><form name="simplePropertyForm" novalidate ng-submit="save()" class="edit-property-form"><div class=""><div class="control-group" ng-class="getFieldInputClass(simplePropertyForm.simpleProperty.$invalid)"><div class="controls">'+h(b)+'<i class="glyphicon glyphicon-remove" ng-click="clearInput()"></i><div class="help-inline text-danger" ng-show="simplePropertyForm.simpleProperty.$dirty && simplePropertyForm.simpleProperty.$invalid"><span ng-show="simplePropertyForm.simpleProperty.$error.required">'+f("propertyeditor.error.required")+'</span><span ng-show="simplePropertyForm.simpleProperty.$error.number">'+f("propertyeditor.error.number")+'</span><span ng-show="simplePropertyForm.simpleProperty.$error.pattern">'+f("propertyeditor.error.pattern")+'</span><span ng-show="simplePropertyForm.simpleProperty.$error.custom">'+f("propertyeditor.error.custom")+'</span><span ng-show="simplePropertyForm.simpleProperty.$error.email" >'+f("propertyeditor.error.email")+"</span></div></div></div>"+g(b)+'</div><div class="row-fluid"><button type="button" ng-click="closeDialog()" class="btn span6" data-dismiss="modal">'+f("common.cancel")+'</button><button type="submit" class="btn btn-primary span6" ng-disabled="simplePropertyForm.$invalid">'+f("common.save")+"</button></div></form></div>"},compile:function(c,f,g){var h=(f.hasOwnProperty("editorRequired")?"required='required'":"",f.hasOwnProperty("editorPattern")?"ng-pattern='"+f.editorPattern+"'":"",f.hasOwnProperty("editorField")?f.editorField:null,f.hasOwnProperty("editorEntity")?f.editorEntity:null,f.hasOwnProperty("editorType")?f.editorType:"text");return{pre:function(a,b,c,d){a.dateOptions={"show-button-bar":!1,"show-weeks":!0},a.status={opened:!1}},post:function(c,f,g,j){function k(a){if(a){if(angular.isDate(a))return p.$setValidity("date",!0),a;if(angular.isString(a)){var b=new Date(a);return isNaN(b)?(p.$setValidity("date",!0),a):(p.$setValidity("date",!0),b)}return p.$setValidity("date",!1),a}return p.$setValidity("date",!0),null}function l(a){var b;return console.log("Formatting value "+a),a?(b=new Date(a),d.isValidDate(b)?e("date")(a,"yyyy-MM-dd"):a):void 0}var m=f.find("div.simple-property-editor"),n=f.find("div.simple-property-editor-mask"),o=f.find("input.property-input, input.form-control, textarea.property-input, textarea.form-control"),p=c.simplePropertyForm.simpleProperty,q=g.hasOwnProperty("editorEntity");g.hasOwnProperty("editorValidate")&&p.$parsers.push(function(a){return c.editorValidate?c.editorValidate({value:a})?(p.$setValidity("custom",!0),a):void p.$setValidity("custom",!1):void 0}),"datepicker"==h&&p&&(p.$parsers.pop(),p.$parsers.push(k),p.$formatters.push(l),c.dateOptions={"show-button-bar":!1,"show-weeks":!0}),c.save=function(){c.isValid()&&(c.saved=!0,q?(c.prevValue=c.editorEntity[c.editorField],c.editorEntity[c.editorField]=c.editorValue,angular.forEach(c.editorEntity.translations,function(a,b){a[c.editorField]=c.editorTranslations[b]})):c.editorProperty=c.editorValue,a(function(){c.editorOnSave({modifiedProperty:c.editorField,prevValue:c.prevValue})}),n.hide(),m.hide())},c.isValid=function(){return c.simplePropertyForm.$valid&&!c.saved||"datepicker"==h},c.closeDialog=function(){n.hide(),m.hide()},c.clearInput=function(a){if(a){c.editorTranslations[a]="";var b='[name="simpleProperty'+a+'"]';f.find("input"+b+".property-input, textarea"+b+".property-input").trigger("focus")}else c.editorValue="",o.trigger("focus");c.editorRepeat&&(c.editorRepeat="")},c.matchInput=function(){c.simplePropertyForm.simpleProperty.$viewValue!==c.simplePropertyForm.repeatProperty.$viewValue?c.simplePropertyForm.repeatProperty.$setValidity("match",!1):c.simplePropertyForm.repeatProperty.$setValidity("match",!0)},c.getLanguageTitle=function(a){return a?langcodesMap[a]?langcodesMap[a].lang:a:void 0},c.open=function(b){a(function(){c.status.opened=!0})},c.status={opened:!1},f.find("div.toggler").bind("click",function(){if(1==c.editorEnabled||"undefined"==typeof c.editorEnabled){c.editorRepeat="",c.saved=!1,q?(c.editorValue=c.editorEntity[c.editorField],c.editorTranslations={},angular.forEach(c.editorEntity.translations,function(a,b){c.editorTranslations[b]=a[c.editorField]})):c.editorValue=c.editorProperty,c.$digest();var a,d,e,g,h,i;d=f.find("div.toggler").offset().top-f.find("div.toggler").offsetParent().offset().top,a=f.find("h5.editor-title").css("lineHeight"),a=a.replace("px",""),h=f.find("div.value"),e=$(document).height(),g=$(window).width(),n.css({width:g,height:e}),n.show();try{h&&1==h.length?(i=h.offset().left-h.offsetParent().offset().left,m.css("left",i)):f.parent().is("td")&&(i=f.offset().left-f.offsetParent().offset().left,m.css("left",i))}catch(j){b.error("simplePropertyEditor: failed to calculate left")}m.css("top",d-a-25),m.show(),o.trigger("focus")}}),n.bind("click",function(){c.closeDialog()}),m.bind("keyup",function(a){27==a.which&&c.closeDialog()}),c.getFieldInputClass=i}}}};return j}]),angular.module("PReports.directives").directive("simpleConfirmDialog",["language","$log","$timeout",function(a,b,c){var d={restrict:"A",replace:!1,transclude:!0,priority:100,scope:{dialogTitle:"@",dialogText:"@",dialogOnConfirm:"&",dialogConfirmButton:"@",dialogDisabled:"=",dialogConfirmBtnCls:"@"},template:function(a,b){var c,d=b.hasOwnProperty("dialogConfirmBtnCls")?b.dialogConfirmBtnCls:"btn-primary";return c='<span class="toggler" ng-transclude></span><div class="modal confirm-modal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">×</button><h4 l="{{dialogTitle}}">Confirm dialog</h4></div><div class="modal-body"><p l="{{dialogText}}"></p></div>  <div class="modal-footer"><button type="button" class="btn" data-dismiss="modal" l="cancel">Cancel</button><button type="button" class="btn '+d+'" data-dismiss="modal" ng-click="confirm()" l="{{dialogConfirmButton}}">Confirm</button></div></div></div></div>'},compile:function(a,b,d){return{pre:function(a,b,c,d){},post:function(a,b,d,e){var f=b.find(".simple-confirm-dialog");a.confirm=function(){f.modal("hide"),c(a.dialogOnConfirm,150)},b.find(".toggler").bind("click",function(){var c;a.dialogDisabled||(c=b.find(".confirm-modal"),c.modal("toggle"))})}}}};return d}]),angular.module("PReports.directives").directive("tooltip",["$locale","language",function(a,b){return function(a,c,d,e){var f,g=d.tooltip,h=d.tooltipPosition||"top";g&&(f=b.translate(g)||g,f&&c.tooltip({title:f,placement:h}))}}]);